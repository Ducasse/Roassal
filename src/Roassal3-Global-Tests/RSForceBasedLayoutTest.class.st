Class {
	#name : #RSForceBasedLayoutTest,
	#superclass : #RSTest,
	#instVars : [
		'canvas',
		'boxes'
	],
	#category : #'Roassal3-Global-Tests-Layouts'
}

{ #category : #running }
RSForceBasedLayoutTest >> setUp [
	super setUp.
	canvas := RSCanvas new.
	boxes := RSBox models: (10 to: 50).
	RSLineBuilder line
		canvas: canvas;
		shapes: boxes;
		color: (Color blue alpha: 0.5);
		connectFrom: [ :nb | nb // 2 ].
	canvas addAll: boxes
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAddNodesAndEdges [
	"Test uses random, so we skip it."

	self skip.

	RSForceBasedLayout new
		start;
		addNodes: boxes;
		addLines: canvas edges;
		step.

	self assert: (boxes collect: #position as: Array) equals: {
			(97.34459924239476 @ -140.21174864874365).
			(-344.8805296252168 @ -131.70871933700352).
			(191.40683531594678 @ 60.43558239999987).
			(-107.02978812039875 @ 164.30313015545647).
			(246.2390902642046 @ 286.5861655705215).
			(182.628967698387 @ -172.4063819907635).
			(257.6060147944193 @ -199.3637997436996).
			(724.6342787573386 @ -1247.325266595098).
			(-788.0667616320719 @ 647.961868479349).
			(153.3830646943367 @ -250.05560788453187).
			(346.84684336788683 @ -73.36146619947567).
			(-372.98359896898705 @ -6.87820073119131).
			(-450.75684612339256 @ 16.997245723931233).
			(-137.15122035201563 @ -120.83231365177502).
			(-200.43503057668258 @ 93.18696196636122).
			(78.66505178511383 @ -403.34089232516936).
			(-100.53883691879747 @ 261.74617609376).
			(-126.43086271729692 @ -138.81335082267447).
			(-157.04942222454252 @ 155.478383075669).
			(80.50863849373738 @ -184.43019293104453).
			(-252.56900708505117 @ -66.25800811774096).
			(-240.8257785472699 @ -60.528441629833154).
			(342.9280477527969 @ -73.77436620567418).
			(-128.40413143971472 @ 173.4374392805).
			(361.0088462741944 @ 151.26735167512098).
			(-211.41917714501594 @ -105.17038862808172).
			(-64.36749238832518 @ -269.1490660291568).
			(183.48489798195783 @ -88.6644996974235).
			(-91.66100216815796 @ 273.2841950055732).
			(243.86049345118454 @ 504.80983767590396).
			(-439.6061887794352 @ -11.997438300562063).
			(-181.34250646702642 @ -576.2814741149678).
			(135.9106424575321 @ -166.30081397391208).
			(-130.63097162513426 @ 135.2575674659243).
			(-56.02193484146836 @ 376.1900550780017).
			(117.2525027511711 @ 111.68566903062151).
			(355.8719088744972 @ 417.93508769846494).
			(169.70308769362785 @ 111.39103155798173).
			(254.9138505679128 @ 8.540672469346967).
			(65.21576202457861 @ 335.61048551481434).
			(2357.814444825102 @ -1077.7934160819755) }
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAttributes [
	RSForceBasedLayout new
		length: 100;
		charge: -300;
		center: 200@200;
		on: boxes.
	self assertIntegerPosition: boxes equals: {181 @ 36.
340 @ 305.
8 @ 310.
76 @ -59.
333 @ -76.
263 @ 43.
479 @ 117.
19 @ 215.
203 @ 362.
-67 @ 92.
80 @ 30.
228 @ 128.
443 @ 309.
293 @ 397.
18 @ 410.
105 @ 331.
-9 @ -7.
168 @ -96.
337 @ 21.
414 @ -12.
356 @ 85.
235 @ -53.
384 @ 150.
427 @ 205.
112 @ 250.
11 @ 112.
203 @ 463.
257 @ 279.
-113 @ 183.
-53 @ 195.
83 @ 133.
146 @ 107.
191 @ 221.
300 @ 198.
501 @ 229.
427 @ 411.
283 @ 495.
385 @ 365.
-61 @ 349.
83 @ 485.
131 @ 426}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAutoRepulse [
	self assert: RSForceBasedLayout new autoRepulse equals: false.
	RSForceBasedLayout new
		autoRepulse: true;
		on: boxes.
	self assertIntegerPosition: boxes equals: {0 @ -26.
36 @ 49.
-40 @ 35.
-23 @ -71.
49 @ -52.
17 @ -55.
61 @ 0.
-60 @ -37.
4 @ 21.
-68 @ 2.
-10 @ -37.
4 @ -11.
51 @ 45.
21 @ 54.
-42 @ 51.
-27 @ 26.
-38 @ -65.
-8 @ -73.
49 @ -36.
63 @ -46.
24 @ -41.
21 @ -70.
76 @ -5.
47 @ -3.
-71 @ -26.
-51 @ -24.
1 @ 36.
20 @ 18.
-71 @ 17.
-52 @ 4.
-25 @ -43.
-22 @ -25.
-8 @ -1.
20 @ -9.
65 @ 37.
50 @ 29.
8 @ 63.
25 @ 70.
-57 @ 49.
-32 @ 64.
-20 @ 40}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testBasic [
	RSForceBasedLayout new
		doNotUseProgressBar;
		on: boxes.
	self assertIntegerPosition: boxes equals: {0 @ -44.
53 @ 27.
-56 @ 37.
-32 @ -87.
57 @ -41.
39 @ -76.
77 @ 5.
-69 @ -32.
4 @ 72.
-91 @ -11.
-19 @ -53.
5 @ -23.
32 @ 21.
70 @ 40.
-66 @ 55.
-36 @ 27.
-52 @ -78.
-10 @ -89.
78 @ -34.
68 @ -59.
30 @ -56.
23 @ -89.
59 @ -5.
97 @ -1.
-63 @ -11.
-49 @ -21.
-10 @ 87.
21 @ 85.
-98 @ 8.
-78 @ 6.
-40 @ -54.
-25 @ -31.
-4 @ -4.
25 @ -15.
26 @ 42.
11 @ 24.
56 @ 57.
76 @ 61.
-58 @ 76.
-45 @ 62.
-18 @ 38}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testBasic02 [
	RSForceBasedLayout on: boxes.
	self assertIntegerPosition: boxes equals: {0 @ -44.
53 @ 27.
-56 @ 37.
-32 @ -87.
57 @ -41.
39 @ -76.
77 @ 5.
-69 @ -32.
4 @ 72.
-91 @ -11.
-19 @ -53.
5 @ -23.
32 @ 21.
70 @ 40.
-66 @ 55.
-36 @ 27.
-52 @ -78.
-10 @ -89.
78 @ -34.
68 @ -59.
30 @ -56.
23 @ -89.
59 @ -5.
97 @ -1.
-63 @ -11.
-49 @ -21.
-10 @ 87.
21 @ 85.
-98 @ 8.
-78 @ 6.
-40 @ -54.
-25 @ -31.
-4 @ -4.
25 @ -15.
26 @ 42.
11 @ 24.
56 @ 57.
76 @ 61.
-58 @ 76.
-45 @ 62.
-18 @ 38}
]
